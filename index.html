<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CPUX-F Quiz</title>
    <!-- Favicon wird aus dem 'assets'-Ordner geladen -->
    <link rel="icon" type="image/png" href="assets/favicon.png">
    <!-- Tailwind CSS CDN fÃ¼r schnelles Styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            box-sizing: border-box;
        }
        .quiz-container {
            background-color: #ffffff;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            padding: 30px; /* Padding applies to the entire container */
            max-width: 900px;
            width: 100%;
            text-align: center;
            position: relative;
            min-height: auto; /* Allow height to adjust based on content */
        }

        /* Mode Selection Screen */
        .mode-selection-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 400px; /* Minimum height for the selection screen */
        }
        .mode-selection-screen h2 {
            font-size: 2rem;
            color: #1f2937;
            margin-bottom: 30px;
        }
        .mode-selection-buttons {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }
        .mode-button {
            background-color: #3b82f6;
            color: #ffffff;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1.2rem;
            cursor: pointer;
            transition: background-color 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            min-width: 200px;
        }
        .mode-button:hover {
            background-color: #2563eb;
        }

        /* Quiz Active Content (Initially hidden) */
        .quiz-active-content {
            display: none; /* Hidden by default */
        }

        /* Quiz Title */
        .quiz-mode-title {
            font-size: 1.8rem;
            font-weight: bold;
            color: #1f2937;
            margin-bottom: 20px;
            text-align: center;
        }

        /* Specific elements now within the single .quiz-container */
        .timer {
            font-size: 1.5rem;
            font-weight: bold;
            color: #3b82f6;
            margin-bottom: 10px;
        }
        .question-counter {
            font-size: 1rem;
            color: #6b7280;
            margin-bottom: 15px;
        }
        .question-text {
            font-size: 1.25rem;
            margin-bottom: 25px;
            color: #1f2937;
            font-weight: 600;
            text-align: left;
        }
        .answers-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 30px;
        }
        .answer-button {
            background-color: #e0e7ff;
            color: #4338ca;
            padding: 12px 20px;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            border: 2px solid transparent;
            word-wrap: break-word;
            white-space: normal;
        }
        .answer-button:hover {
            background-color: #c7d2fe;
            border-color: #818cf8;
        }
        .answer-button.selected {
            background-color: #a78bfa;
            color: #ffffff;
            border-color: #7c3aed;
        }
        .answer-button.correct {
            background-color: #84cc16;
            color: #ffffff;
            border-color: #65a30d;
        }
        .answer-button.incorrect {
            background-color: #ef4444;
            color: #ffffff;
            border-color: #dc2626;
        }
        .navigation-buttons, .review-nav-buttons {
            display: flex;
            justify-content: space-between;
            gap: 10px; /* Reduced gap for more buttons */
            margin-top: 20px;
            flex-wrap: wrap; /* Allow wrapping on smaller screens */
        }
        .nav-button {
            background-color: #3b82f6;
            color: #ffffff;
            padding: 12px 15px; /* Adjusted padding */
            border-radius: 10px;
            font-size: 0.9rem; /* Adjusted font size */
            cursor: pointer;
            transition: background-color 0.3s ease;
            flex-grow: 1;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            min-width: 120px; /* Minimum width for buttons */
        }
        .nav-button:hover {
            background-color: #2563eb;
        }
        .nav-button:disabled {
            background-color: #9ca3af;
            cursor: not-allowed;
            box-shadow: none;
        }
        .review-nav-buttons .nav-button {
            background-color: #10b981; /* Green for review buttons */
        }
        .review-nav-buttons .nav-button:hover {
            background-color: #059669;
        }

        .results-container {
            padding: 20px;
            text-align: center;
        }
        .results-container h2 {
            font-size: 2rem;
            color: #1f2937;
            margin-bottom: 20px;
        }
        .results-container p {
            font-size: 1.2rem;
            color: #4b5563;
            margin-bottom: 10px;
        }
        .results-container button {
            background-color: #10b981;
            color: white;
            padding: 8px 15px;
            border-radius: 8px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin-top: 10px;
        }
        .results-container button:hover {
            background-color: #059669;
        }
        .feedback-message {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            font-weight: bold;
        }
        .feedback-correct {
            background-color: #dcfce7;
            color: #16a34a;
        }
        .feedback-incorrect {
            background-color: #fee2e2;
            color: #dc2626;
        }
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .modal.show {
            opacity: 1;
            visibility: visible;
        }
        .modal-content {
            background-color: #ffffff;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            text-align: center;
            max-width: 600px; /* Increased max-width for better explanation display */
            width: 90%;
            color: #1f2937;
            max-height: 80vh; /* Limit height */
            overflow-y: auto; /* Enable scrolling if content overflows */
        }
        .modal-content h3 {
            font-size: 1.8rem;
            margin-bottom: 15px;
        }
        .modal-content p {
            font-size: 1.1rem;
            margin-bottom: 25px;
            text-align: left; /* Align text left for readability */
        }
        .modal-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap; /* Allow wrapping */
        }
        .modal-button {
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .modal-button.primary {
            background-color: #3b82f6;
            color: #ffffff;
            border: none;
        }
        .modal-button.primary:hover {
            background-color: #2563eb;
        }
        .modal-button.secondary {
            background-color: #e0e7ff;
            color: #4338ca;
            border: 1px solid #a78bfa;
        }
        .modal-button.secondary:hover {
            background-color: #c7d2fe;
        }
        .loading-spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3b82f6;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .button-group-top {
            display: flex;
            justify-content: space-between; /* Adjusted to space-between for new button */
            align-items: center;
            gap: 10px;
            margin-bottom: 20px; /* Added margin-bottom to separate from question text */
            flex-wrap: wrap;
        }
        .button-group-top .left-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        .button-group-top .right-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: flex-end; /* Align right */
        }
        .mark-button, .review-marked-button-top, .switch-mode-button { /* Combined styles for top buttons */
            background-color: #facc15;
            color: #854d09;
            padding: 8px 15px;
            border-radius: 8px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: background-color 0.3s ease;
            white-space: nowrap; /* Prevent button text from wrapping */
        }
        .mark-button:hover, .review-marked-button-top:hover, .switch-mode-button:hover {
            background-color: #eab308;
        }
        .mark-button.marked {
            background-color: #10b981;
            color: #ffffff;
        }
        .review-marked-button-top {
            background-color: #60a5fa; /* A blueish color for review button in header */
            color: #ffffff;
        }
        .review-marked-button-top:hover {
            background-color: #3b82f6;
        }
        .switch-mode-button {
            background-color: #ef4444; /* Red color for switch mode */
            color: #ffffff;
        }
        .switch-mode-button:hover {
            background-color: #dc2626;
        }


        .results-marked-list {
            margin-top: 30px;
            text-align: left;
            border-top: 1px solid #e5e7eb;
            padding-top: 20px;
        }
        .results-marked-list h3 {
            font-size: 1.5rem;
            color: #1f2937;
            margin-bottom: 15px;
        }
        .results-marked-list ul {
            list-style: none;
            padding: 0;
        }
        .results-marked-list li {
            margin-bottom: 10px;
        }
        .results-marked-list li button {
            background-color: #6366f1;
            color: white;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 0.85rem;
            margin-left: 10px;
        }
        .results-marked-list li button:hover {
            background-color: #4f46e5;
        }
        /* Hide normal nav buttons when in review mode */
        .navigation-buttons.hidden-by-review {
            display: none;
        }
        /* Style for the marked questions list in the review modal */
        #marked-questions-list {
            max-height: 400px; /* Fixed height for scrollability */
            overflow-y: auto;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 10px;
        }
        #marked-questions-list li {
            padding: 8px;
            border-bottom: 1px solid #e5e7eb;
            cursor: pointer;
            transition: background-color 0.2s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        #marked-questions-list li:last-child {
            border-bottom: none;
        }
        #marked-questions-list li:hover {
            background-color: #f3f4f6;
        }
        #marked-questions-list li.current-marked {
            background-color: #dbeafe; /* Highlight current marked question */
            font-weight: bold;
        }
        .show-explanation-btn-inline, .show-explanation-btn {
            background-color: #10b981;
            color: white;
            padding: 6px 12px;
            border-radius: 8px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin-top: 10px;
            display: inline-block; /* Make it inline with text if needed */
        }
        .show-explanation-btn-inline:hover, .show-explanation-btn:hover {
            background-color: #059669;
        }
    </style>
</head>
<body>
    <div class="quiz-container">
        <div id="mode-selection-screen" class="mode-selection-screen">
            <h2>WÃ¤hlen Sie einen Modus:</h2>
            <div class="mode-selection-buttons">
                <button id="start-practice-mode" class="mode-button">Ãben Modus starten</button>
                <button id="start-test-mode" class="mode-button">Test Modus starten</button>
            </div>
        </div>

        <div id="quiz-active-content" class="quiz-active-content">
            <h2 id="quiz-mode-title" class="quiz-mode-title"></h2>
            <div class="timer" id="timer">75:00</div>
            <div class="question-counter" id="question-counter">Frage 1 von 40</div>
            <div class="button-group-top">
                <div class="left-buttons">
                    <button id="switch-mode-button" class="switch-mode-button">Modus wechseln</button>
                </div>
                <div class="right-buttons">
                    <button id="mark-button" class="mark-button">Frage zum ÃberprÃ¼fen markieren</button>
                    <button id="review-marked-button" class="review-marked-button-top">Markierte Fragen Ã¼berprÃ¼fen (<span id="marked-count">0</span>)</button>
                </div>
            </div>

            <div class="question-text" id="question-text"></div>
            <div class="answers-container" id="answers-container"></div>
            <div id="feedback-message" class="feedback-message hidden"></div>
            <button id="explanation-inline-button" class="show-explanation-btn-inline hidden">â¨ ErklÃ¤rung anzeigen</button>

            <div class="navigation-buttons" id="normal-nav-buttons">
                <button id="prev-button" class="nav-button">ZurÃ¼ck</button>
                <button id="next-button" class="nav-button">Weiter</button>
                <button id="submit-button" class="nav-button hidden">Quiz beenden</button>
            </div>

            <div class="review-nav-buttons hidden" id="review-nav-buttons">
                <button id="prev-marked-button" class="nav-button">Vorherige markierte Frage</button>
                <button id="exit-review-button" class="nav-button">Quiz fortsetzen</button>
                <button id="next-marked-button" class="nav-button">NÃ¤chste markierte Frage</button>
            </div>
        </div>
    </div>

    <div id="finish-quiz-modal" class="modal">
        <div class="modal-content">
            <h3>Quiz beenden?</h3>
            <p>MÃ¶chten Sie das Quiz wirklich beenden und Ihre Ergebnisse sehen?</p>
            <div class="modal-buttons">
                <button class="modal-button primary" id="confirm-finish">Ja, beenden</button>
                <button class="modal-button secondary" id="cancel-finish">Abbrechen</button>
            </div>
        </div>
    </div>

    <div id="time-up-modal" class="modal">
        <div class="modal-content">
            <h3>Zeit abgelaufen!</h3>
            <p>Die Zeit fÃ¼r das Quiz ist abgelaufen. Ihre Ergebnisse werden nun angezeigt.</p>
            <div class="modal-buttons">
                <button class="modal-button primary" id="view-results">Ergebnisse anzeigen</button>
            </div>
        </div>
    </div>

    <div id="explanation-modal" class="modal">
        <div class="modal-content">
            <h3 id="explanation-title">ErklÃ¤rung</h3>
            <div id="explanation-content">
                <!-- ErklÃ¤rungstext wird hier geladen -->
            </div>
            <div class="modal-buttons">
                <button class="modal-button primary" id="close-explanation">SchlieÃen</button>
            </div>
        </div>
    </div>

    <div id="review-list-modal" class="modal">
        <div class="modal-content">
            <h3>Markierte Fragen zum ÃberprÃ¼fen</h3>
            <p id="no-marked-questions-message" class="text-gray-600 hidden">Keine Fragen markiert.</p>
            <ul id="marked-questions-list" class="text-left">
                </ul>
            <div class="modal-buttons mt-4">
                <button class="modal-button primary" id="close-review-list">SchlieÃen</button>
                <button class="modal-button secondary" id="start-review-mode">Review-Modus starten</button>
            </div>
        </div>
    </div>

    <script type="module">
        // Original quiz questions with explanations from the PDF
        const originalQuestions = [
            {
                question: "Welcher eine der folgenden Aspekte ist Bestandteil der menschzentrierten Gestaltung?",
                answers: [
                    "A. Engagement des Managements fÃ¼r Usability und menschzentrierte Gestaltung",
                    "B. Interesse des Managements an Innovationen",
                    "C. Die Analyse von Konkurrenzprodukten, um mÃ¶gliche Fallstricke zu verstehen",
                    "D. Die Einbeziehung der Benutzer wÃ¤hrend des gesamten Gestaltungsprozesses",
                    "E. RegelmÃ¤Ãige VorfÃ¼hrungen des entstehenden interaktiven Systems vor Benutzern",
                    "F. Genaue ZeitplÃ¤ne zur Erreichung von Usability-Meilensteinen, sodass der Fortschritt Ã¼berwacht werden kann"
                ],
                correct: ["D"],
                multiChoice: false,
                correctTexts: ["D. Die Einbeziehung der Benutzer wÃ¤hrend des gesamten Gestaltungsprozesses"],
                explanation: "Antwort D ist die Definition von âEinbeziehung der Benutzerâ im Curriculum."
            },
            {
                question: "Die folgende Abbildung zeigt den Zusammenhang zwischen den AktivitÃ¤ten der menschzentrierten Gestaltung. Welche zwei Fehler sind in der Abbildung enthalten?",
                answers: [
                    "A. Die AktivitÃ¤t âManagement stimmt den Nutzungsanforderungen zu\" fehlt.",
                    "B. Die AktivitÃ¤t âPrototypen erstellen\" fehlt.",
                    "C. Die AktivitÃ¤t âFestlegen von menschzentrierten Funktionen\" fehlt.",
                    "D. Statt âFestlegen der Nutzungsanforderungen\" sollte in der entsprechenden AktivitÃ¤t âFestlegen der Nutzungsanforderungen, die den Nutzungskontext erfÃ¼llen\" stehen.",
                    "E. Es fehlt einer der grau schraffierten Pfeile, der eine Iteration kennzeichnen.",
                    "F. Die AktivitÃ¤t âEvaluieren der GestaltungslÃ¶sung gegen organisatorische Anforderungen\" sollte âEvaluieren der GestaltungslÃ¶sung gegen Nutzungsanforderungen\" lauten."
                ],
                correct: ["E", "F"],
                multiChoice: true,
                correctTexts: [
                    "E. Es fehlt einer der grau schraffierten Pfeile, der eine Iteration kennzeichnen.",
                    "F. Die AktivitÃ¤t âEvaluieren der GestaltungslÃ¶sung gegen organisatorische Anforderungen\" sollte âEvaluieren der GestaltungslÃ¶sung gegen Nutzungsanforderungen\" lauten."
                ],
                imageSrc: "https://placehold.co/600x400/E0E7FF/4338CA?text=Abbildung+1+Menschzentrierte+Gestaltung",
                explanation: "Antwort E ist falsch, weil der Pfeil fÃ¼r Iteration fehlt. Antwort F ist falsch, weil die Evaluierung immer gegen die Nutzungsanforderungen erfolgt, nicht gegen organisatorische Anforderungen."
            },
            {
                question: "Welche zwei der folgenden HCD-Ergebnisse werden wÃ¤hrend der AktivitÃ¤t âVerstehen und Festlegen des Nutzungskontextes\" erzeugt?",
                answers: [
                    "A. Erfordernisse",
                    "B. Usability-Testbericht",
                    "C. Personas",
                    "D. Ist-Szenarien",
                    "E. Nutzungsanforderungen",
                    "F. Low-Fidelity-Prototyp"
                ],
                correct: ["C", "D"],
                multiChoice: true,
                correctTexts: ["C. Personas", "D. Ist-Szenarien"],
                explanation: "Antwort C ist richtig, weil Personas ein Ergebnis der AktivitÃ¤t âVerstehen und Festlegen des Nutzungskontextesâ sind. Antwort D ist richtig, weil Ist-Szenarien ein Ergebnis der AktivitÃ¤t âVerstehen und Festlegen des Nutzungskontextesâ sind."
            },
            {
                question: "Eine Hotelbuchungs-Website bietet den Benutzern keine MÃ¶glichkeit, eine Reservierung zu stornieren. Eine Analyse des Nutzungskontextes zeigt aber, dass Benutzer diese Funktion benÃ¶tigen. Welcher eine Aspekt der Usability wird von dieser Website verletzt?",
                answers: [
                    "A. Barrierefreiheit",
                    "B. VollstÃ¤ndigkeit",
                    "C. Effizienz",
                    "D. EffektivitÃ¤t",
                    "E. Zufriedenstellung",
                    "F. Geschwindigkeit"
                ],
                correct: ["D"],
                multiChoice: false,
                correctTexts: ["D. EffektivitÃ¤t"],
                explanation: "Antwort D ist die Definition von âEffektivitÃ¤tâ im Curriculum."
            },
            {
                question: "Welche zwei der folgenden AntwortmÃ¶glichkeiten nennen ein gÃ¼ltiges Beispiel fÃ¼r die Vermeidung von SchÃ¤den durch die Benutzung?",
                answers: [
                    "A. Der Text auf einer Website ist klein und hat einen zu geringen Kontrast zum Hintergrund, so dass Benutzer mit einer Sehbehinderung ihn nicht lesen kÃ¶nnen.",
                    "B. Das Aussehen und die QualitÃ¤t der Blumen, die Ã¼ber die Website eines BlumenhÃ¤ndlers bestellt wurden, unterscheiden sich erheblich von den Bildern auf der Website.",
                    "C. Im Ausland erhalten die Benutzer eine Nachricht auf ihrem Mobiltelefon, die sie Ã¼ber Datenroaming-GebÃ¼hren informiert.",
                    "D. Auf der Website eines Hotels kÃ¶nnen die Benutzer die Buchung eines teuren Hotelzimmers stornieren, aber sie finden nicht heraus, wie das geht.",
                    "E. Die Benutzer geben spontan an, dass ihnen das Aussehen der Startseite einer Hotelwebsite nicht gefÃ¤llt.",
                    "F. Putzmittelflaschen haben einen Verschluss, den Kinder nicht Ã¶ffnen kÃ¶nnen."
                ],
                correct: ["C", "F"],
                multiChoice: true,
                correctTexts: [
                    "C. Im Ausland erhalten die Benutzer eine Nachricht auf ihrem Mobiltelefon, die sie Ã¼ber Datenroaming-GebÃ¼hren informiert.",
                    "F. Putzmittelflaschen haben einen Verschluss, den Kinder nicht Ã¶ffnen kÃ¶nnen."
                ],
                explanation: "Antwort C ist richtig, weil es sich um eine Warnung handelt, die den Benutzer vor Schaden bewahrt. Antwort F ist richtig, weil es sich um eine physische Schutzvorrichtung handelt, die den Benutzer vor Schaden bewahrt."
            },
            {
                question: "Hinsichtlich der Website einer Fluggesellschaft, welche zwei der folgenden Aspekte beeinflussen die User Experience, nicht aber die Usability?",
                answers: [
                    "A. Die Bilder auf der Website sind ansprechend.",
                    "B. Die GepÃ¤ckkosten bleiben verborgen, bis der Benutzer seinen Namen eingegeben hat.",
                    "C. Es ist mÃ¶glich, ein Ticket zu stornieren und einen Teil des Geldes rÃ¼ckerstattet zu bekommen, aber alle Benutzer haben Schwierigkeiten herauszufinden, wie sie die RÃ¼ckerstattung erhalten.",
                    "D. Die Benutzer empfinden die Preise auf der Website als ziemlich hoch.",
                    "E. Die Flughafensuche ist nicht fehlertolerant. Zum Beispiel wird bei einer Suche nach 'Strassbourg' nicht 'Strasbourg' vorgeschlagen.",
                    "F. Nach dem Flug Ã¤rgern sich die Benutzer Ã¼ber unerwÃ¼nschte Marketing-E-Mails der Fluggesellschaft."
                ],
                correct: ["D", "F"],
                multiChoice: true,
                correctTexts: [
                    "D. Die Benutzer empfinden die Preise auf der Website als ziemlich hoch.",
                    "F. Nach dem Flug Ã¤rgern sich die Benutzer Ã¼ber unerwÃ¼nschte Marketing-E-Mails der Fluggesellschaft."
                ],
                explanation: "Antwort D ist richtig, weil die Preise auf der Website die User Experience beeinflussen, aber keine Usability sind. Antwort F ist richtig, weil unerwÃ¼nschte E-Mails die User Experience beeinflussen, aber keine Usability sind."
            },
            {
                question: "Welche zwei der folgenden Komponenten sind fÃ¼r den Autofahrer Teil der Benutzungsschnittstelle eines Autos?",
                answers: [
                    "A. Lenkrad",
                    "B. Batterie",
                    "C. Motor",
                    "D. TÃ¼rgriff",
                    "E. Auspuff",
                    "F. Bremsscheibe"
                ],
                correct: ["A", "D"],
                multiChoice: true,
                correctTexts: ["A. Lenkrad", "D. TÃ¼rgriff"],
                explanation: "Antwort A ist richtig, weil das Lenkrad eine Komponente der Benutzungsschnittstelle ist. Antwort D ist richtig, weil der TÃ¼rgriff eine Komponente der Benutzungsschnittstelle ist."
            },
            {
                question: "Welche eine der folgenden Aussagen ist KEIN menschzentriertes QualitÃ¤tsziel fÃ¼r einen Geldautomaten der nÃ¤chsten Generation?",
                answers: [
                    "A. Die Benutzer mÃ¼ssen in der Lage sein, Geld doppelt so schnell wie bisher abzuheben.",
                    "B. Die Benutzer mÃ¼ssen ein GefÃ¼hl der absoluten PrivatsphÃ¤re haben, wenn sie den Geldautomaten benutzen.",
                    "C. Die Benutzer mÃ¼ssen in der Lage sein, den Namen des Geldautomatenherstellers doppelt so schnell zu erkennen wie bisher.",
                    "D. Blinde Benutzer mÃ¼ssen in der Lage sein, ohne fremde Hilfe Geld abheben.",
                    "E. Die Benutzer mÃ¼ssen in der Lage sein, mit jeder gÃ¼ltigen nationalen oder internationalen Bankkarte Geld abheben.",
                    "F. Benutzer, die eine Quittung anfordern, mÃ¼ssen diese verstehen kÃ¶nnen."
                ],
                correct: ["C"],
                multiChoice: false,
                correctTexts: ["C. Die Benutzer mÃ¼ssen in der Lage sein, den Namen des Geldautomatenherstellers doppelt so schnell zu erkennen wie bisher."],
                explanation: "Antwort C ist falsch, weil die Erkennung des Herstellernamens kein menschzentriertes QualitÃ¤tsziel ist. Es ist kein Ziel, das sich auf die Benutzung des Systems bezieht."
            },
            {
                question: "Welche eine der folgenden Methoden ist NICHT geeignet, um den Nutzungskontext eines Geldautomaten zu bestimmen?",
                answers: [
                    "A. Die Idee fÃ¼r den neuen Geldautomaten reprÃ¤sentativen Bankkunden zeigen",
                    "B. Bankangestellte am Bankschalter interviewen",
                    "C. Benutzer eines aktuellen Geldautomaten interviewen",
                    "D. Benutzer bei der Nutzung des aktuellen Geldautomaten beobachten",
                    "E. Usability-Tests mit Geldautomaten von Wettbewerbern durchfÃ¼hren",
                    "F. DurchfÃ¼hrung von Fokusgruppen zu Erfordernissen, die zukÃ¼nftige Geldautomaten erfÃ¼llen mÃ¼ssen"
                ],
                correct: ["A"],
                multiChoice: false,
                correctTexts: ["A. Die Idee fÃ¼r den neuen Geldautomaten reprÃ¤sentativen Bankkunden zeigen"],
                explanation: "Antwort A ist falsch, weil das Zeigen von Ideen an Kunden kein Mittel zur Bestimmung des Nutzungskontextes ist. Es ist eine Methode zur Validierung von Ideen."
            },
            {
                question: "Thomas arbeitet in einer Bank. Eine seiner Aufgaben ist es, die Bargeldmenge im Geldautomaten zu kontrollieren und gegebenenfalls bis zum erforderlichen Stand aufzufÃ¼llen. Das macht er jeden Morgen und freitagnachmittags in Vorbereitung auf das Wochenende. Welche eine der folgenden Aussagen beschreibt Thomas am besten?",
                answers: [
                    "A. Thomas ist kein Benutzer des Geldautomaten, da er kein Geld abhebt.",
                    "B. Thomas ist primÃ¤rer Benutzer des Geldautomaten.",
                    "C. Thomas ist sekundÃ¤rer Benutzer des Geldautomaten.",
                    "D. Thomas ist ein indirekter Benutzer des Geldautomaten.",
                    "E. Thomas ist ein Interessenvertreter fÃ¼r den Geldautomaten, aber kein Benutzer.",
                    "F. Thomas ist Benutzer des Geldautomaten, aber kein Interessenvertreter."
                ],
                correct: ["C"],
                multiChoice: false,
                correctTexts: ["C. Thomas ist sekundÃ¤rer Benutzer des Geldautomaten."],
                explanation: "Antwort C ist die Definition von âsekundÃ¤rer Benutzerâ im Curriculum."
            },
            {
                question: "HappyHolidays verkauft Ã¼ber seine Website Pauschalreisen. Anna bucht auf HappyHolidays.com eine Reise nach Kreta fÃ¼r Bernd und sich; sie schickt die Bordkarten per E-Mail an Bernd, damit er sie ausdruckt. Carolin hat Schwierigkeiten damit, einen Urlaub in Frankreich auf HappyHolidays.com zu buchen, also ruft sie bei HappyHolidays an und spricht mit David; David fÃ¼hrt sie am Telefon durch den gesamten Buchungsprozess. Welche zwei der folgenden Aussagen sind richtig?",
                answers: [
                    "A. Anna und David sind primÃ¤re Benutzer von HappyHolidays.com.",
                    "B. Bernd ist ein primÃ¤rer Benutzer von HappyHolidays.com.",
                    "C. Bernd und David sind sekundÃ¤re Benutzer von HappyHolidays.com.",
                    "D. David ist ein sekundÃ¤rer Benutzer von HappyHolidays.com.",
                    "E. Bernd und Carolin sind indirekte Benutzer von HappyHolidays.com.",
                    "F. Bernd ist ein indirekter Benutzer von HappyHolidays.com."
                ],
                correct: ["D", "F"],
                multiChoice: true,
                correctTexts: [
                    "D. David ist ein sekundÃ¤rer Benutzer von HappyHolidays.com.",
                    "F. Bernd ist ein indirekter Benutzer von HappyHolidays.com."
                ],
                explanation: "Antwort D ist richtig, weil David ein sekundÃ¤rer Benutzer ist, der das System im Auftrag eines primÃ¤ren Benutzers (Carolin) benutzt. Antwort F ist richtig, weil Bernd ein indirekter Benutzer ist, der das Ergebnis der Systemnutzung erhÃ¤lt, aber nicht direkt mit dem System interagiert."
            },
            {
                question: "Welche zwei der folgenden Personen sind Interessenvertreter, aber KEINE Benutzer einer Autovermietungs-Website?",
                answers: [
                    "A. Ein Trainer, der den Mitarbeitern eines Callcenters beibringt, wie man die Autovermietungs-Website benutzt",
                    "B. Ein Mitarbeiter des Callcenters, der auf der Autovermietungs-Website fÃ¼r einen Kunden eine Reservierung vornimmt",
                    "C. Ein Designer, der die Benutzungsschnittstelle der Autovermietungs-Website gestaltet",
                    "D. Ein Kontoadministrator, der eine E-Mail-Rechnung fÃ¼r eine Reservierung auf der Autovermietungs-Website bekommt",
                    "E. Ein Kunde, der Ã¼ber einen Mitarbeiter im Callcenter eine Reservierung auf der Autovermietungs-Website vornehmen lÃ¤sst",
                    "F. Ein Mitarbeiter im Marketing, der Ã¼ber die Autovermietungs-Website eine Werbeaktion mit â10 % Rabatt auf die Kfz-Versicherungâ laufen lÃ¤sst, die fÃ¼r alle Benutzer gilt, die direkt Ã¼ber die Website ein Auto reservieren"
                ],
                correct: ["C", "F"],
                multiChoice: true,
                correctTexts: [
                    "C. Ein Designer, der die Benutzungsschnittstelle der Autovermietungs-Website gestaltet",
                    "F. Ein Mitarbeiter im Marketing, der Ã¼ber die Autovermietungs-Website eine Werbeaktion mit â10 % Rabatt auf die Kfz-Versicherungâ laufen lÃ¤sst, die fÃ¼r alle Benutzer gilt, die direkt Ã¼ber die Website ein Auto reservieren"
                ],
                explanation: "Antwort C ist richtig, weil Designer Interessenvertreter sind, aber keine Benutzer. Antwort F ist richtig, weil Marketingmitarbeiter Interessenvertreter sind, aber keine Benutzer."
            },
            {
                question: "Welche eine der folgenden Aussagen beschreibt eine Benutzergruppe am besten?",
                answers: [
                    "A. Eine Gruppe von Benutzern mit denselben oder Ã¤hnlichen Personenmerkmalen und Nutzungskontexten in Bezug auf das interaktive System",
                    "B. FÃ¼nf bis zehn Benutzer, die an kontextuellen Interviews teilnehmen",
                    "C. Eine Gruppe von Teilnehmern eines Usability-Tests, deren Personenmerkmale und Nutzungskontext Ã¤hnlich oder identisch bezÃ¼glich des interaktiven Systems sind",
                    "D. Eine Gruppe von Teilnehmern an einer Fokusgruppe, deren Personenmerkmale und Nutzungskontext Ã¤hnlich oder identisch bezÃ¼glich des interaktiven Systems sind",
                    "E. Eine Beschreibung einer fiktiven, aber realistischen Gruppe von Benutzern und was sie bei der Benutzung eines interaktiven Systems zu tun beabsichtigen",
                    "F. Eine Beschreibung einer Gruppe von Benutzern und was sie bei der Benutzung des interaktiven Systems tun mÃ¶chten"
                ],
                correct: ["A"],
                multiChoice: false,
                correctTexts: ["A. Eine Gruppe von Benutzern mit denselben oder Ã¤hnlichen Personenmerkmalen und Nutzungskontexten in Bezug auf das interaktive System"],
                explanation: "Antwort A ist die Definition von âBenutzergruppeâ im Curriculum."
            },
            {
                question: "Welche zwei der folgenden Aussagen beschreiben am besten, warum es wichtig ist, zwischen Aufgaben und Teilaufgaben zu unterscheiden?",
                answers: [
                    "A. Aufgaben sind fÃ¼r primÃ¤re Benutzer und Teilaufgaben sind fÃ¼r sekundÃ¤re und indirekte Benutzer.",
                    "B. Dem Meister-SchÃ¼ler-Modell zufolge sind Aufgaben fÃ¼r den Meister und Teilaufgaben fÃ¼r den SchÃ¼ler.",
                    "C. Aufgaben kÃ¶nnen zur Erstellung von Usability-Testaufgaben verwendet werden; Teilaufgaben sollten als Grundlage fÃ¼r Usability-Testaufgaben vermieden werden, da sie fÃ¼r sich genommen keinen Wert besitzen.",
                    "D. Aufgaben bilden die Grundlage fÃ¼r Nutzungsszenarien, wÃ¤hrend Teilaufgaben die Grundlage fÃ¼r Aufgabenmodelle sind.",
                    "E. Aufgaben werden verwendet, um Erfordernisse abzuleiten. Sowohl Aufgaben als auch Teilaufgaben werden zur Ableitung von Nutzungsanforderungen verwendet.",
                    "F. Beim Festlegen einer Interaktion, die eine Aufgabe unterstÃ¼tzt, mÃ¼ssen alle Teilaufgaben, die fÃ¼r die Erledigung dieser Aufgabe wichtig sind, berÃ¼cksichtigt werden."
                ],
                correct: ["C", "F"],
                multiChoice: true,
                correctTexts: [
                    "C. Aufgaben kÃ¶nnen zur Erstellung von Usability-Testaufgaben verwendet werden; Teilaufgaben sollten als Grundlage fÃ¼r Usability-Testaufgaben vermieden werden, da sie fÃ¼r sich genommen keinen Wert besitzen.",
                    "F. Beim Festlegen einer Interaktion, die eine Aufgabe unterstÃ¼tzt, mÃ¼ssen alle Teilaufgaben, die fÃ¼r die Erledigung dieser Aufgabe wichtig sind, berÃ¼cksichtigt werden."
                ],
                explanation: "Antwort C ist richtig, weil Aufgaben fÃ¼r Usability-Testaufgaben verwendet werden kÃ¶nnen, wÃ¤hrend Teilaufgaben fÃ¼r sich genommen keinen Wert besitzen. Antwort F ist richtig, weil alle Teilaufgaben, die fÃ¼r die Erledigung einer Aufgabe wichtig sind, berÃ¼cksichtigt werden mÃ¼ssen."
            },
            {
                question: "Welche zwei der folgenden Fragen sind am besten geeignet, wenn eine Benutzerbefragung verwendet wird, um den Nutzungskontext einer Hotelbuchungs-Website zu verstehen?",
                answers: [
                    "A. Was erwarten Sie von einer Hotelbuchungs-Website?",
                    "B. Wie zufrieden sind Sie mit der neuen Buchungswebsite fÃ¼r das Hotel Zeta in BrÃ¼ssel?",
                    "C. Wie beurteilen Sie die Aussage: âDie neue Hotelbuchungs-Website sieht gut ausâ?",
                    "D. Aus welchem Grund haben Sie zuletzt eine Hotelbuchungs-Website genutzt?",
                    "E. Wie sind derzeit die finanziellen Aussichten fÃ¼r neue Hotels?",
                    "F. Wie beurteilen Sie die Aussage: âDie neue Hotelbuchungs-Website entspricht meinen Erwartungenâ?"
                ],
                correct: ["A", "D"],
                multiChoice: true,
                correctTexts: [
                    "A. Was erwarten Sie von einer Hotelbuchungs-Website?",
                    "D. Aus welchem Grund haben Sie zuletzt eine Hotelbuchungs-Website genutzt?"
                ],
                explanation: "Antwort A ist richtig, weil es eine offene Frage ist, die sich auf Erwartungen bezieht. Antwort D ist richtig, weil es eine offene Frage ist, die sich auf den Nutzungsgrund bezieht."
            },
            {
                question: "Welche eine der folgenden Aussagen beschreibt den Zweck einer Fokusgruppe am besten?",
                answers: [
                    "A. Fokussierte Informationen von einer Gruppe von Benutzern in einer Usability-Testsitzung sammeln",
                    "B. Kontextuelle Informationen Ã¼ber die Erfordernisse der Benutzer sammeln, ohne deren Arbeit zu beeintrÃ¤chtigen",
                    "C. Kontextuelle Informationen Ã¼ber die Erfordernisse der Benutzer sammeln, indem man mit Benutzern spricht und dabei den Fokus auf eine besondere Benutzergruppe legt",
                    "D. Ideen fÃ¼r fokussierte Personas und Szenarien durch Befragung von Mitgliedern einer Benutzergruppe sammeln",
                    "E. Ein tieferes VerstÃ¤ndnis ausgewÃ¤hlter Themen und wichtiger Fragen des Nutzungskontexts aus verschiedenen Blickwinkeln zu gewinnen",
                    "F. Ein interaktives System evaluieren"
                ],
                correct: ["E"],
                multiChoice: false,
                correctTexts: ["E. Ein tieferes VerstÃ¤ndnis ausgewÃ¤hlter Themen und wichtiger Fragen des Nutzungskontexts aus verschiedenen Blickwinkeln zu gewinnen"],
                explanation: "Antwort E ist die Definition von âFokusgruppeâ im Curriculum."
            },
            {
                question: "Ein Kollege plant Interviews mit den Benutzern eines Restaurantbewertungssystems. Seine Interview-Checkliste enthÃ¤lt unter anderem die Frage: Wie wÃ¤hlen Sie ein Restaurant aus? Welche zwei der folgenden Begriffe charakterisieren diese Interviewfrage am besten?",
                answers: [
                    "A. Geschlossen",
                    "B. Formativ",
                    "C. Suggestiv",
                    "D. Neutral",
                    "E. Offen",
                    "F. Summativ"
                ],
                correct: ["D", "E"],
                multiChoice: true,
                correctTexts: ["D. Neutral", "E. Offen"],
                explanation: "Antwort D ist richtig, weil die Frage neutral ist und keine bestimmte Antwort suggeriert. Antwort E ist richtig, weil es eine offene Frage ist, die eine ausfÃ¼hrliche Antwort erfordert."
            },
            {
                question: "Welche zwei der folgenden Aussagen sind gÃ¼ltige Ist-Szenarien fÃ¼r eine bestehende Autovermietungs-Website?",
                answers: [
                    "A. Rita besucht die Autovermietungswebsite, um einen Kleinwagen zu mieten. Sie vergleicht die Autos, die an ihren Reisedaten verfÃ¼gbar sind und wÃ¤hlt das Auto aus, das ihr am besten gefÃ¤llt. Sie reserviert das Auto fÃ¼r die Abholung am Tag vor ihrer Reise.",
                    "B. Rita besucht die Autovermietungswebsite, um einen Kleinwagen zu mieten. Ihr ist nicht klar, ob die Autos, die ihr gefallen, an ihren Reisedaten verfÃ¼gbar sind. Rita sucht nach einer Telefonnummer, um mit jemandem von der Autovermietung zu sprechen, aber sie kann nur einen Chat-Dienst finden, der momentan offline ist.",
                    "C. 1. Ermitteln Sie die gewÃ¼nschte Abfahrtszeit; 2. Ermitteln Sie die Kosten fÃ¼r jedes verfÃ¼gbare Fahrzeug; 3. WÃ¤hlen Sie ein Fahrzeug (basierend auf Kosten, GrÃ¶Ãe, persÃ¶nlichen Vorlieben); 4. Reservieren Sie das Auto; 5. Holen Sie das Auto ab.",
                    "D. Bei der Anmietung eines Autos mÃ¼ssen die Kunden wissen, welche Fahrzeuge zu den von ihnen ausgewÃ¤hlten Terminen verfÃ¼gbar sind, damit sie eine gezielte Entscheidung treffen kÃ¶nnen.",
                    "E. Bei der Anmietung eines Autos mÃ¼ssen die Kunden das gewÃ¼nschte Datum auswÃ¤hlen kÃ¶nnen, damit die Website die verfÃ¼gbaren Fahrzeuge anzeigen kann.",
                    "F. Rita kann Auto fahren, besitzt aber kein Auto. Rita besucht am Wochenende gelegentlich ihren Bruder in LÃ¼beck. Diese Reise mit dem Zug zu machen, ist ihr zu teuer und die Busfahrt dauert ihr zu lange. Daher mietet sie normalerweise ein Auto."
                ],
                correct: ["A", "B"],
                multiChoice: true,
                correctTexts: [
                    "A. Rita besucht die Autovermietungswebsite, um einen Kleinwagen zu mieten. Sie vergleicht die Autos, die an ihren Reisedaten verfÃ¼gbar sind und wÃ¤hlt das Auto aus, das ihr am besten gefÃ¤llt. Sie reserviert das Auto fÃ¼r die Abholung am Tag vor ihrer Reise.",
                    "B. Rita besucht die Autovermietungswebsite, um einen Kleinwagen zu mieten. Ihr ist nicht klar, ob die Autos, die ihr gefallen, an ihren Reisedaten verfÃ¼gbar sind. Rita sucht nach einer Telefonnummer, um mit jemandem von der Autovermietung zu sprechen, aber sie kann nur einen Chat-Dienst finden, der momentan offline ist."
                ],
                explanation: "Antwort A ist richtig, weil es ein Ist-Szenario ist, das den aktuellen Zustand der Systemnutzung beschreibt. Antwort B ist richtig, weil es ein Ist-Szenario ist, das ein Problem bei der aktuellen Systemnutzung beschreibt."
            },
            {
                question: "Welcher eine Ausdruck charakterisiert die folgende Beschreibung am besten? Elena Herrmann, Personalkoordinatorin, Fluid Pharmaceuticals. Elena ist 35 Jahre alt. Sie teilt sich eine Wohnung mit ihrem Freund, mit dem sie seit vier Jahren zusammen ist. Die beiden haben keine Kinder. Elenas LieblingsbeschÃ¤ftigungen sind Tangotanzen und das Zubereiten kÃ¶stlicher Tapas. Sie hat solide Grundkenntnisse in Spanisch. Elena verbringt den grÃ¶Ãten Teil ihres Tages damit, Formulare zu bearbeiten, die benÃ¶tigt werden, um Mitarbeiter in der Marketingabteilung einzustellen, zu versetzen oder zu entlassen. Wenn etwas unvollstÃ¤ndig oder unklar ist, nimmt sie sich die nÃ¶tige Zeit, die Antwort zu finden. Sie ist Expertin fÃ¼r alle relevanten Formulare und Verfahren. Elenas Ziele: Karriere im Personalwesen, Exzellenz durch Genauigkeit, Hilfsbereitschaft, nicht in RÃ¼ckstand geraten.",
                answers: [
                    "A. Prototyp",
                    "B. Persona",
                    "C. Ist-Szenario",
                    "D. Nutzungsszenario",
                    "E. Benutzergruppe",
                    "F. Benutzergruppenprofil"
                ],
                correct: ["B"],
                multiChoice: false,
                correctTexts: ["B. Persona"],
                explanation: "Antwort B ist die Definition von âPersonaâ im Curriculum."
            },
            {
                question: "Welche zwei der folgenden Aussagen Ã¼ber Erfordernisse sind richtig?",
                answers: [
                    "A. Erfordernisse werden immer aus Sicht des Benutzers formuliert.",
                    "B. Die Erfordernisse fÃ¼r eine Benutzergruppe kÃ¶nnen sich von den Erfordernissen fÃ¼r eine andere Benutzergruppe im gleichen Nutzungskontext unterscheiden.",
                    "C. Erfordernisse sind Teil der Informationsarchitektur.",
                    "D. Erfordernisse sind immer quantifiziert.",
                    "E. Erfordernisse sind identisch mit Benutzerzielen.",
                    "F. Erfordernisse werden verwendet, um gute Fehlermeldungen zu formulieren."
                ],
                correct: ["A", "B"],
                multiChoice: true,
                correctTexts: [
                    "A. Erfordernisse werden immer aus Sicht des Benutzers formuliert.",
                    "B. Die Erfordernisse fÃ¼r eine Benutzergruppe kÃ¶nnen sich von den Erfordernissen fÃ¼r eine andere Benutzergruppe im gleichen Nutzungskontext unterscheiden."
                ],
                explanation: "Antwort A ist richtig, weil Erfordernisse immer aus Sicht des Benutzers formuliert werden. Antwort B ist richtig, weil sich die Erfordernisse fÃ¼r verschiedene Benutzergruppen unterscheiden kÃ¶nnen."
            },
            {
                question: "Welcher eine der untenstehenden Begriffe beschreibt die folgende Aussage am besten? 80% der Benutzer, die die Autovermietungs-Website schon mindestens zweimal genutzt haben, mÃ¼ssen in der Lage sein, am Flughafen Frankfurt ein Auto fÃ¼r zwei Tage ab morgen 09.00 Uhr zu mieten. Benutzer mÃ¼ssen die Aufgabe in weniger als 5 Minuten erledigen kÃ¶nnen.",
                answers: [
                    "A. Low-Fidelity-Prototyp-Anforderung",
                    "B. Nutzungsszenario",
                    "C. Usability-Testaufgabe",
                    "D. Erfordernis",
                    "E. Quantitative Nutzungsanforderung",
                    "F. Qualitative Nutzungsanforderung"
                ],
                correct: ["E"],
                multiChoice: false,
                correctTexts: ["E. Quantitative Nutzungsanforderung"],
                explanation: "Antwort E ist die Definition von âquantitative Nutzungsanforderungâ im Curriculum."
            },
            {
                question: "Welche zwei der folgenden Aussagen sind gÃ¼ltige Nutzungsanforderungen fÃ¼r eine Hotelbuchungs-Website?",
                answers: [
                    "A. Mindestens 80% der Benutzer, die die Website zum ersten Mal nutzen, mÃ¼ssen in der Lage sein, innerhalb von zehn Minuten ein Zimmer zu buchen.",
                    "B. Das Firmenlogo muss in der oberen linken Ecke jeder Website erscheinen.",
                    "C. Die Website muss mindestens so gut nutzbar sein, wie die der zwei stÃ¤rksten Wettbewerber.",
                    "D. Die Website muss Ã¼ber ein Hilfesystem verfÃ¼gen.",
                    "E. Das Farbschema der Website muss die Standardfarben des Hotels widerspiegeln.",
                    "F. Benutzer mÃ¼ssen in der Lage sein, eine Zimmerbuchung zu stornieren."
                ],
                correct: ["A", "F"],
                multiChoice: true,
                correctTexts: [
                    "A. Mindestens 80% der Benutzer, die die Website zum ersten Mal nutzen, mÃ¼ssen in der Lage sein, innerhalb von zehn Minuten ein Zimmer zu buchen.",
                    "F. Benutzer mÃ¼ssen in der Lage sein, eine Zimmerbuchung zu stornieren."
                ],
                explanation: "Antwort A ist richtig, weil es eine quantitative Nutzungsanforderung ist. Antwort F ist richtig, weil es eine qualitative Nutzungsanforderung ist."
            },
            {
                question: "Welche zwei der folgenden Aspekte sind Teil der Informationsarchitektur?",
                answers: [
                    "A. Styleguide",
                    "B. Gestaltungsregeln",
                    "C. Festlegen des Grafikdesigns",
                    "D. Die AusdrÃ¼cke, die in der Benutzungsschnittstelle fÃ¼r Navigation und Inhalt verwendet werden",
                    "E. Wireframes",
                    "F. Die Struktur der Informationen, die dem Benutzer zur VerfÃ¼gung stehen mÃ¼ssen"
                ],
                correct: ["D", "F"],
                multiChoice: true,
                correctTexts: [
                    "D. Die AusdrÃ¼cke, die in der Benutzungsschnittstelle fÃ¼r Navigation und Inhalt verwendet werden",
                    "F. Die Struktur der Informationen, die dem Benutzer zur VerfÃ¼gung stehen mÃ¼ssen"
                ],
                explanation: "Antwort D ist richtig, weil AusdrÃ¼cke in der Benutzungsschnittstelle Teil der Informationsarchitektur sind. Antwort F ist richtig, weil die Struktur der Informationen Teil der Informationsarchitektur ist."
            },
            {
                question: "Welche eine der folgenden Methoden ist am nÃ¼tzlichsten fÃ¼r die Entwicklung der Navigationsstruktur einer neuen Website?",
                answers: [
                    "A. Kontextuelles Interview",
                    "B. Fokusgruppe",
                    "C. Usability-Inspektion eines Low-Fidelity-Prototyps",
                    "D. Usability-Inspektion eines High-Fidelity-Prototyps",
                    "E. Card-Sorting",
                    "F. Storyboard"
                ],
                correct: ["E"],
                multiChoice: false,
                correctTexts: ["E. Card-Sorting"],
                explanation: "Antwort E ist die Definition von âCard-Sortingâ im Curriculum."
            },
            {
                question: "Welcher eine der folgenden Begriffe beschreibt die untenstehende Abbildung am besten?",
                answers: [
                    "A. Design Pattern",
                    "B. Persona",
                    "C. Nutzungsszenario",
                    "D. Styleguide",
                    "E. Storyboard",
                    "F. Wireframe"
                ],
                correct: ["F"],
                multiChoice: false,
                correctTexts: ["F. Wireframe"],
                imageSrc: "https://placehold.co/600x400/E0E7FF/4338CA?text=Wireframe+Beispiel",
                explanation: "Antwort F ist die Definition von âWireframeâ im Curriculum."
            },
            {
                question: "FÃ¼r eine interne Demonstration hat einer Ihrer Kollegen ein neues Bestellsystem auf einigen BlÃ¤ttern Papier skizziert. Jedes Blatt stellt einen Screen dar. Der Inhalt der Screens ist handgezeichnet und unvollstÃ¤ndig. Ihr Kollege wechselt die Screens, sobald man auf den Button âklicktâ, indem man mit einem Bleistift das Blatt berÃ¼hrt. Welcher eine der folgenden Begriffe beschreibt diese Sammlung von Skizzen am besten?",
                answers: [
                    "A. Gestaltungsregel",
                    "B. Low-Fidelity-Prototyp",
                    "C. High-Fidelity-Prototyp",
                    "D. Wireframe",
                    "E. Styleguide",
                    "F. Storyboard"
                ],
                correct: ["B"],
                multiChoice: false,
                correctTexts: ["B. Low-Fidelity-Prototyp"],
                explanation: "Antwort B ist die Definition von âLow-Fidelity-Prototypâ im Curriculum."
            },
            {
                question: "Welche zwei der folgenden Begriffe sind Interaktionsprinzipien?",
                answers: [
                    "A. ErwartungskonformitÃ¤t",
                    "B. Nachhaltigkeit",
                    "C. Gebrauchstauglichkeit",
                    "D. Aufgabenangemessenheit",
                    "E. Vermeidung von SchÃ¤den durch die Benutzung",
                    "F. Barrierefreiheit"
                ],
                correct: ["A", "D"],
                multiChoice: true,
                correctTexts: ["A. ErwartungskonformitÃ¤t", "D. Aufgabenangemessenheit"],
                explanation: "Antwort A ist richtig, weil ErwartungskonformitÃ¤t ein Interaktionsprinzip ist. Antwort D ist richtig, weil Aufgabenangemessenheit ein Interaktionsprinzip ist."
            },
            {
                question: "Welche eine der folgenden Aussagen beschreibt den Begriff âmentales Modellâ am besten?",
                answers: [
                    "A. Eine Beschreibung eines fiktiven, aber realistischen Benutzers und was er bei der Verwendung eines interaktiven Systems zu tun beabsichtigt",
                    "B. Eine Beschreibung der Teilaufgaben innerhalb einer Aufgabe, die ausgefÃ¼hrt werden mÃ¼ssen, um die Ziele des Benutzers zu erreichen",
                    "C. Der Denkprozess einer Person darÃ¼ber, wie etwas in der realen Welt funktioniert",
                    "D. Ein kostengÃ¼nstiges, einfaches Modell eines Designs oder Konzepts, das dazu dient, RÃ¼ckmeldungen von Benutzern und anderen Interessenvertretern in frÃ¼hen Phasen der Entwicklung einzuholen",
                    "E. Informationen, die einen Benutzer dabei unterstÃ¼tzen, mit einem interaktiven System zu interagieren",
                    "F. Ein Datenmodell, das abbildet, was die Teilnehmer nach einer Usability-Testsitzung Ã¼ber das interaktive System dachten"
                ],
                correct: ["C"],
                multiChoice: false,
                correctTexts: ["C. Der Denkprozess einer Person darÃ¼ber, wie etwas in der realen Welt funktioniert"],
                explanation: "Antwort C ist die Definition von âmentales Modellâ im Curriculum."
            },
            {
                question: "Welche eine der folgenden Aussagen verdeutlicht die Wichtigkeit von Gestaltungsregeln?",
                answers: [
                    "A. Gestaltungsregeln sichern die Umsetzung der menschzentrierten Gestaltung, indem sie primÃ¤ren Benutzern ermÃ¶glichen, direkt an der Gestaltung teilzunehmen.",
                    "B. Der unspezifische Charakter von Gestaltungsregeln gibt Designern die Freiheit, User Interface Elemente nach ihrem Belieben zu implementieren.",
                    "C. Der spezifische Charakter von Gestaltungsregeln ermÃ¶glicht es Designern, die gleichen User Interface Elemente konsistent zu implementieren.",
                    "D. Gestaltungsregeln ermÃ¶glichen es Designern, sich Unterschiede im Aussehen und Verhalten von Benutzungsschnittstellen innerhalb einer Organisation einfallen zu lassen.",
                    "E. Gestaltungsregeln zielen in erster Linie darauf ab, die Verantwortung fÃ¼r die Gestaltung von Benutzungsschnittstellen auf das gesamte Designteam zu verteilen, anstatt dem User Interface Designer die alleinige Verantwortung zu Ã¼berlassen.",
                    "F. Gestaltungsregeln werden in Usability-Inspektionen verwendet, um festzustellen, ob ein Design den organisatorischen Anforderungen entspricht oder nicht."
                ],
                correct: ["C"],
                multiChoice: false,
                correctTexts: ["C. Der spezifische Charakter von Gestaltungsregeln ermÃ¶glicht es Designern, die gleichen User Interface Elemente konsistent zu implementieren."],
                explanation: "Antwort C ist richtig, weil Gestaltungsregeln die konsistente Implementierung von User Interface Elementen sichern."
            },
            {
                question: "Welche eine der folgenden Aussagen beschreibt den Begriff âDesign Patternâ am besten?",
                answers: [
                    "A. Eine Sammlung von Buttons in verschiedenen Formen und Farben fÃ¼r die Verwendung auf einer Website",
                    "B. Eine Sammlung von Personas mit sehr Ã¤hnlichen Merkmalen",
                    "C. Eine Sammlung von Benutzergruppen mit sehr Ã¤hnlichen Merkmalen",
                    "D. Eine Sammlung von 4 bis 8 Icons, die in einer festen Reihenfolge auf dem Screen angeordnet sind",
                    "E. Eine Reihe unterschiedlicher AnsÃ¤tze zur LÃ¶sung einer Aufgabe in einem gegebenen Nutzungskontext; die AnsÃ¤tze mÃ¼ssen in mehreren separaten Usability-Testsitzungen beobachtet worden sein",
                    "F. Eine LÃ¶sung eines hÃ¤ufig auftretendes Gestaltungsproblem in einem gegebenen Nutzungskontext, die ein Gestaltungsproblem, eine allgemeine LÃ¶sung und Beispiele fÃ¼r die Anwendung dieser beschreibt"
                ],
                correct: ["F"],
                multiChoice: false,
                correctTexts: ["F. Eine LÃ¶sung eines hÃ¤ufig auftretendes Gestaltungsproblem in einem gegebenen Nutzungskontext, die ein Gestaltungsproblem, eine allgemeine LÃ¶sung und Beispiele fÃ¼r die Anwendung dieser beschreibt"],
                explanation: "Antwort F ist die Definition von âDesign Patternâ im Curriculum."
            },
            {
                question: "Welche zwei der folgenden Methoden werden hÃ¤ufig zur Usability-Evaluierung eingesetzt?",
                answers: [
                    "A. Kontextuelles Interview",
                    "B. Unmoderierter Usability-Test",
                    "C. Fokusgruppen",
                    "D. Erstellung von Personas",
                    "E. Erstellung von Storyboards",
                    "F. Usability-Inspektion"
                ],
                correct: ["B", "F"],
                multiChoice: true,
                correctTexts: ["B. Unmoderierter Usability-Test", "F. Usability-Inspektion"],
                explanation: "Antwort B ist richtig, weil unmoderierte Usability-Tests zur Usability-Evaluierung eingesetzt werden. Antwort F ist richtig, weil Usability-Inspektionen zur Usability-Evaluierung eingesetzt werden."
            },
            {
                question: "Ihr Team ist bereit, eine neue Autovermietungs-Website online zu stellen. Aufgrund zeitlicher EngpÃ¤sse konnten wÃ¤hrend der Entwicklung der Website keine Usability-Tests durchgefÃ¼hrt werden. Ihr Vorgesetzter fordert Sie nun auf, einen Usability-Test durchzufÃ¼hren. Ihre Teammitglieder stehen Usability skeptisch gegenÃ¼ber. Angenommen, Sie haben keine groÃen EinschrÃ¤nkungen hinsichtlich des Budgets, welche eine der folgenden MaÃnahmen wÃ¤re fÃ¼r das Projekt am besten?",
                answers: [
                    "A. FÃ¼hren Sie einen Usability-Test mit 20 reprÃ¤sentativen Benutzern durch. Laden Sie Ihre Teammitglieder zur Beobachtung der Testsitzungen ein.",
                    "B. FÃ¼hren Sie einen Usability-Test mit 5 reprÃ¤sentativen Benutzern durch. Beheben Sie die gefundenen Usability-Probleme, bevor Sie einen weiteren Usability-Test mit 5 anderen reprÃ¤sentativen Benutzern durchfÃ¼hren. Laden Sie Ihre Teammitglieder zur Beobachtung der Testsitzungen ein.",
                    "C. FÃ¼hren Sie eine Fokusgruppe mit 10 reprÃ¤sentativen Benutzern durch, in der die neue Website vorgestellt und diskutiert wird. Laden Sie Ihre Teammitglieder zur Beobachtung der Fokusgruppe ein.",
                    "D. FÃ¼hren Sie eine Fokusgruppe mit 4 reprÃ¤sentativen Benutzern durch, in der die neue Website vorgestellt und diskutiert wird. Laden Sie Ihre Teammitglieder zur Beobachtung der Fokusgruppe ein.",
                    "E. Bitten Sie jedes Ihrer Teammitglieder, eine Reihe von reprÃ¤sentativen Aufgaben auf der Website auszufÃ¼hren, damit sie âden Schmerz der Benutzer spÃ¼ren kÃ¶nnenâ.",
                    "F. FÃ¼hren Sie eine Usability-Inspektion der Website durch."
                ],
                correct: ["B"],
                multiChoice: false,
                correctTexts: ["B. FÃ¼hren Sie einen Usability-Test mit 5 reprÃ¤sentativen Benutzern durch. Beheben Sie die gefundenen Usability-Probleme, bevor Sie einen weiteren Usability-Test mit 5 anderen reprÃ¤sentativen Benutzern durchfÃ¼hren. Laden Sie Ihre Teammitglieder zur Beobachtung der Testsitzungen ein."],
                explanation: "Antwort B ist die beste MaÃnahme, da iterative Usability-Tests mit kleinen Benutzergruppen am effektivsten sind, um Usability-Probleme zu finden und zu beheben, und die Einbeziehung von Teammitgliedern ihre Skepsis reduziert."
            },
            {
                question: "Welche eine der folgenden Aussagen beschreibt einen Usability-Test am besten?",
                answers: [
                    "A. Eine moderierte, problemorientierte Diskussion zwischen reprÃ¤sentativen Benutzern",
                    "B. Ein Experte evaluiert das interaktive System sorgfÃ¤ltig, um Usability-Probleme aufzudecken.",
                    "C. ReprÃ¤sentative Benutzer werden gebeten, ihre Meinung Ã¼ber das interaktive System zu Ã¤uÃern.",
                    "D. ReprÃ¤sentative Benutzer evaluieren das interaktive System anhand eines Fragebogens.",
                    "E. ReprÃ¤sentative Benutzer werden beobachtet, wÃ¤hrend sie vorgegebene, reprÃ¤sentative Aufgaben mit Hilfe des interaktiven Systems lÃ¶sen.",
                    "F. ReprÃ¤sentative Benutzer testen das interaktive System, um Fehler und MÃ¤ngel zu finden."
                ],
                correct: ["E"],
                multiChoice: false,
                correctTexts: ["E. ReprÃ¤sentative Benutzer werden beobachtet, wÃ¤hrend sie vorgegebene, reprÃ¤sentative Aufgaben mit Hilfe des interaktiven Systems lÃ¶sen."],
                explanation: "Antwort E ist die Definition von âUsability-Testâ im Curriculum."
            },
            {
                question: "Welche zwei der folgenden AktivitÃ¤ten gehÃ¶ren zur Vorbereitung oder Planung eines Usability-Tests?",
                answers: [
                    "A. Briefing des Usability-Testteilnehmers Ã¼ber das, was wÃ¤hrend der Usability-Testsitzung passieren wird",
                    "B. Erstellen des Usability-Test-Leitfadens",
                    "C. DurchfÃ¼hren des Pre-Test-Interviews",
                    "D. Rekrutierung geeigneter Usability-Testteilnehmer",
                    "E. Verfassen des Usability-Testberichts",
                    "F. Verfassen des Interview-Leitfadens"
                ],
                correct: ["B", "D"],
                multiChoice: true,
                correctTexts: [
                    "B. Erstellen des Usability-Test-Leitfadens",
                    "D. Rekrutierung geeigneter Usability-Testteilnehmer"
                ],
                explanation: "Antwort B ist richtig, weil das Erstellen des Usability-Test-Leitfadens zur Planung gehÃ¶rt. Antwort D ist richtig, weil die Rekrutierung von Teilnehmern zur Planung gehÃ¶rt."
            },
            {
                question: "Sie wurden gebeten, einen Usability-Test einer Autovermietungs-Website durchzufÃ¼hren. Welche eine der folgenden Aufgaben ist fÃ¼r den Usability-Test NICHT geeignet?",
                answers: [
                    "A. Finden Sie eine Telefonnummer, die Sie anrufen kÃ¶nnen, um mit jemandem Ã¼ber Ihren Mietvertrag zu sprechen.",
                    "B. Sagen Sie mir, was Sie von der Startseite der Website halten.",
                    "C. Mieten Sie ein Auto, das Ihren Erfordernissen entspricht. Mieten Sie es von einem Ort aus und fÃ¼r einen Zeitraum, der zu Ihnen und Ihrem Budget passt.",
                    "D. Mieten Sie einen Kleinwagen vom Flughafen London Heathrow. Sie mÃ¼ssen das Auto morgen frÃ¼h um 9 Uhr abholen und 4 Tage spÃ¤ter mittags am selben Ort zurÃ¼ckgeben.",
                    "E. Stornieren Sie eine Reservierung, die Sie zuvor getÃ¤tigt haben.",
                    "F. Wie hoch ist die Miete eines Navigationssystems?"
                ],
                correct: ["B"],
                multiChoice: false,
                correctTexts: ["B. Sagen Sie mir, was Sie von der Startseite der Website halten."],
                explanation: "Antwort B ist falsch, weil es sich um eine Meinungsfrage handelt, die nicht fÃ¼r einen Usability-Test geeignet ist, da sie keine konkrete Aufgabe beinhaltet."
            },
            {
                question: "Welche eine der folgenden Aussagen beschreibt den Begriff âPost-Test-Interviewâ am besten?",
                answers: [
                    "A. Die Informationen, die der Moderator dem Testteilnehmer vor der Usability-Testsitzung zur VerfÃ¼gung stellt",
                    "B. Das Interview, das stattfindet, bevor der Usability-Testteilnehmer mit der DurchfÃ¼hrung von Usability-Testaufgaben beginnt",
                    "C. Die Fragen, die der Moderator dem Testteilnehmer wÃ¤hrend der Usability-Testsitzung stellt",
                    "D. Das Interview, das stattfindet, nachdem der Usability-Testteilnehmer so viele Usability-Testaufgaben durchgefÃ¼hrt hat, wie es die Zeit erlaubt",
                    "E. Die Fragen, die der Moderator den Testteilnehmern etwa eine Woche nach der Usability-Testsitzung stellt, um ihre langfristige User Experience zu erfassen",
                    "F. Die Fragen, die am Ende eines kontextuellen Interviews gestellt werden"
                ],
                correct: ["D"],
                multiChoice: false,
                correctTexts: ["D. Das Interview, das stattfindet, nachdem der Usability-Testteilnehmer so viele Usability-Testaufgaben durchgefÃ¼hrt hat, wie es die Zeit erlaubt"],
                explanation: "Antwort D ist die Definition von âPost-Test-Interviewâ im Curriculum."
            },
            {
                question: "Sie fÃ¼hren einen Usability-Test einer neuen Autovermietungs-Website durch. Welcher eine der folgenden Befunde ist NICHT passend fÃ¼r diesen Usability-Test?",
                answers: [
                    "A. Auf der Startseite fehlt ein âReservierung stornierenâ-Button.",
                    "B. Die animierte Werbung auf der rechten Seite der Startseite hat mich genervt und abgelenkt.",
                    "C. Die Mietpreise sind zu hoch.",
                    "D. Fachbegriffe wie CDW, Collision Damage Waiver, werden gut erklÃ¤rt.",
                    "E. Ich fand es schwierig, die Gesamtkosten fÃ¼r die Miete herauszufinden.",
                    "F. Ich konnte nicht herausfinden, ob ich ein Auto in Paris ausleihen und in Madrid zurÃ¼ckgeben kann."
                ],
                correct: ["C"],
                multiChoice: false,
                correctTexts: ["C. Die Mietpreise sind zu hoch."],
                explanation: "Antwort C hat nichts mit Usability zu tun."
            },
            {
                question: "Welcher eine der folgenden Begriffe ist KEINE typische Bewertung eines Usability-Befunds?",
                answers: [
                    "A. Positiver Befund",
                    "B. Geringes Problem",
                    "C. Ernstes Problem",
                    "D. Kritisches Problem",
                    "E. Essenzielles Problem (muss unabhÃ¤ngig von den Kosten behoben werden)",
                    "F. Katastrophales Problem (existenzielle Bedrohung)"
                ],
                correct: ["E"],
                multiChoice: false,
                correctTexts: ["E. Essenzielles Problem (muss unabhÃ¤ngig von den Kosten behoben werden)"],
                explanation: "Antwort E ist falsch, weil der Begriff âEssenzielles Problem (muss unabhÃ¤ngig von den Kosten behoben werden)â im Curriculum nicht aufgefÃ¼hrt ist. AuÃerdem Ã¼berschreitet der Zusatz âmuss unabhÃ¤ngig von den Kosten behoben werdenâ den Verantwortungsbereich des User Experience Professionals."
            },
            {
                question: "Welche eine der folgenden Aussagen beschreibt eine Usability-Inspektion am besten?",
                answers: [
                    "A. Ein Treffen, bei dem Designer im Brainstorming Ideen fÃ¼r ein neues interaktives System entwickeln",
                    "B. Eine Evaluierung eines Storyboard",
                    "C. Eine Evaluierung eines interaktiven Systems, bei der Experten potenzielle Usability-Probleme identifizieren",
                    "D. Eine fokussierte Diskussion, bei der ein Moderator eine Gruppe von Teilnehmern durch eine Reihe von Fragen zu einem bestimmten Thema fÃ¼hrt",
                    "E. Eine Evaluierung, bei der reprÃ¤sentative Benutzer bestimmte Aufgaben am interaktiven System ausfÃ¼hren, um Usability-Probleme zu identifizieren",
                    "F. Eine ÃberprÃ¼fung (Inspektion) der Ergebnisse eines kontextuellen Interviews"
                ],
                correct: ["C"],
                multiChoice: false,
                correctTexts: ["C. Eine Evaluierung eines interaktiven Systems, bei der Experten potenzielle Usability-Probleme identifizieren"],
                explanation: "Antwort C ist eine Kurzversion der Definition von Usability-Inspektion im Curriculum."
            },
            {
                question: "Welche eine der folgenden Aussagen beschreibt am besten, wie Benutzerbefragungen fÃ¼r die Usability-Evaluierung verwendet werden?",
                answers: [
                    "A. Die Benutzer werden gebeten, durch AusfÃ¼llen eines Fragebogens Fakten und Meinungen Ã¼ber ein interaktives System mitzuteilen.",
                    "B. Ein oder mehrere Evaluatoren untersuchen oder benutzen ein interaktives System, um potenzielle Usability-Probleme zu identifizieren.",
                    "C. ReprÃ¤sentative Benutzer fÃ¼hren bestimmte Aufgaben mit dem interaktiven System aus.",
                    "D. Ein Moderator stellt ausgewÃ¤hlten Personen Fragen, um ein tieferes VerstÃ¤ndnis fÃ¼r die Usability eines interaktiven Systems zu gewinnen.",
                    "E. Die Benutzer werden gebeten, ihre Ergebnisse zu berichten, nachdem sie das interaktive System etwa 30 Minuten lang untersucht haben.",
                    "F. Ein Moderator leitet eine Diskussion zwischen Mitgliedern einer oder mehrerer Benutzergruppen Ã¼ber vorher festgelegte Fragen der Usability."
                ],
                correct: ["A"],
                multiChoice: false,
                correctTexts: ["A. Die Benutzer werden gebeten, durch AusfÃ¼llen eines Fragebogens Fakten und Meinungen Ã¼ber ein interaktives System mitzuteilen."],
                explanation: "Antwort A ist eine geringfÃ¼gig geÃ¤nderte Version der Definition von Benutzerbefragung im Curriculum."
            }
        ];

        let questions = []; // This will hold the shuffled questions

        let currentQuestionIndex = 0;
        // Speichert die ausgewÃ¤hlten Antworten des Benutzers fÃ¼r jede Frage
        let userAnswers = []; // Initialized in resetQuizState
        // Speichert, ob eine Frage zum ÃberprÃ¼fen markiert wurde
        let markedForReview = []; // Initialized in resetQuizState
        // Speichert die Indizes der Fragen, die markiert wurden, in der Reihenfolge, in der sie im Review-Modus angezeigt werden sollen
        let markedQuestionIndices = [];
        // Index innerhalb der markedQuestionIndices-Liste im Review-Modus
        let currentReviewIndex = 0;
        // Zustand, ob das Quiz im Review-Modus ist
        let isInReviewMode = false;
        // Speichert den aktuell ausgewÃ¤hlten Modus ('practice' oder 'test')
        let currentMode = null;

        let timerInterval;
        const TIME_LIMIT_MINUTES = 75;
        let timeLeft = TIME_LIMIT_MINUTES * 60; // Sekunden

        const modeSelectionScreen = document.getElementById('mode-selection-screen');
        const startPracticeModeButton = document.getElementById('start-practice-mode');
        const startTestModeButton = document.getElementById('start-test-mode');

        const quizActiveContent = document.getElementById('quiz-active-content');
        const quizModeTitle = document.getElementById('quiz-mode-title');
        const timerDisplay = document.getElementById('timer');
        const questionCounterDisplay = document.getElementById('question-counter');
        const questionTextElement = document.getElementById('question-text');
        const answersContainer = document.getElementById('answers-container');
        const feedbackMessage = document.getElementById('feedback-message');
        const markButton = document.getElementById('mark-button');
        const markedCountDisplay = document.getElementById('marked-count');
        const explanationInlineButton = document.getElementById('explanation-inline-button');
        const switchModeButton = document.getElementById('switch-mode-button'); // New button

        const normalNavButtons = document.getElementById('normal-nav-buttons');
        const prevButton = document.getElementById('prev-button');
        const nextButton = document.getElementById('next-button');
        const submitButton = document.getElementById('submit-button');
        const reviewMarkedButton = document.getElementById('review-marked-button');

        const reviewNavButtons = document.getElementById('review-nav-buttons');
        const prevMarkedButton = document.getElementById('prev-marked-button');
        const nextMarkedButton = document.getElementById('next-marked-button');
        const exitReviewButton = document.getElementById('exit-review-button');

        const finishQuizModal = document.getElementById('finish-quiz-modal');
        const confirmFinishButton = document.getElementById('confirm-finish');
        const cancelFinishButton = document.getElementById('cancel-finish');
        const timeUpModal = document.getElementById('time-up-modal');
        const viewResultsButton = document.getElementById('view-results');
        const explanationModal = document.getElementById('explanation-modal');
        const explanationTitle = document.getElementById('explanation-title');
        const explanationContent = document.getElementById('explanation-content');
        const closeExplanationButton = document.getElementById('close-explanation');
        const reviewListModal = document.getElementById('review-list-modal');
        const markedQuestionsList = document.getElementById('marked-questions-list');
        const closeReviewListButton = document.getElementById('close-review-list');
        const startReviewModeButton = document.getElementById('start-review-mode');
        const noMarkedQuestionsMessage = document.getElementById('no-marked-questions-message');


        /**
         * Shuffles an array in place (Fisher-Yates algorithm).
         * @param {Array} array - The array to shuffle.
         */
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        /**
         * Formatiert die verbleibende Zeit in Minuten und Sekunden.
         * @param {number} seconds - Die verbleibende Zeit in Sekunden.
         * @returns {string} Die formatierte Zeit (MM:SS).
         */
        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const remainingSeconds = seconds % 60;
            return `${minutes < 10 ? '0' : ''}${minutes}:${remainingSeconds < 10 ? '0' : ''}${remainingSeconds}`;
        }

        /**
         * Aktualisiert den Timer und zeigt ihn an.
         */
        function updateTimer() {
            timeLeft--;
            timerDisplay.textContent = formatTime(timeLeft);

            if (timeLeft <= 0) {
                clearInterval(timerInterval);
                showTimeUpModal();
            }
        }

        /**
         * Startet den Quiz-Timer.
         */
        function startTimer() {
            // Clear any existing timer to prevent multiple timers running
            if (timerInterval) {
                clearInterval(timerInterval);
            }
            timerInterval = setInterval(updateTimer, 1000);
        }

        /**
         * Zeigt die aktuelle Frage und ihre Antworten an, abhÃ¤ngig vom Modus (normal oder Review).
         */
        function displayQuestion() {
            let actualQuestionIndexInShuffledArray; // This will be the index in the `questions` array (shuffled)
            let originalQuestionIndex; // This will be the index in the `originalQuestions` array

            if (isInReviewMode) {
                originalQuestionIndex = markedQuestionIndices[currentReviewIndex];
                // Find the actual index in the shuffled 'questions' array that corresponds to this original index
                actualQuestionIndexInShuffledArray = questions.findIndex(q => q === originalQuestions[originalQuestionIndex]);
                questionCounterDisplay.textContent = `Markierte Frage ${currentReviewIndex + 1} von ${markedQuestionIndices.length}`;

                // Highlight the current question in the review list modal
                const reviewListItems = markedQuestionsList.querySelectorAll('li');
                reviewListItems.forEach((item, index) => {
                    if (index === currentReviewIndex) {
                        item.classList.add('current-marked');
                    } else {
                        item.classList.remove('current-marked');
                    }
                });

            } else {
                actualQuestionIndexInShuffledArray = currentQuestionIndex;
                originalQuestionIndex = originalQuestions.findIndex(q => q === questions[actualQuestionIndexInShuffledArray]);
                questionCounterDisplay.textContent = `Frage ${currentQuestionIndex + 1} von ${questions.length}`;
            }

            const question = questions[actualQuestionIndexInShuffledArray];
            let questionContent = question.question;

            // Add image if available
            if (question.imageSrc) {
                questionContent = `<img src="${question.imageSrc}" alt="Illustration zur Frage" class="mx-auto my-4 rounded-lg shadow-md" style="max-width: 100%; height: auto;">` + questionContent;
            }
            questionTextElement.innerHTML = questionContent;

            answersContainer.innerHTML = '';
            question.answers.forEach((answer, index) => {
                const inputType = question.multiChoice ? 'checkbox' : 'radio';
                const inputName = question.multiChoice ? `question-${originalQuestionIndex}-option` : `question-${originalQuestionIndex}`;

                const answerHtml = `
                    <label class="flex items-center space-x-3 cursor-pointer p-3 rounded-lg hover:bg-blue-50 transition duration-200">
                        <input type="${inputType}" name="${inputName}" value="${String.fromCharCode(65 + index)}" class="${inputType === 'radio' ? 'form-radio' : 'form-checkbox'} h-5 w-5 text-blue-600 focus:ring-blue-500">
                        <span class="text-gray-800">${answer}</span>
                    </label>
                `;
                answersContainer.insertAdjacentHTML('beforeend', answerHtml);
            });

            // Re-select previously chosen answers and apply styling
            answersContainer.querySelectorAll(`input[name^="question-${originalQuestionIndex}"]`).forEach(input => {
                const label = input.closest('label');
                if (userAnswers[originalQuestionIndex].includes(input.value)) {
                    input.checked = true;
                    label.classList.add('selected');
                } else {
                    input.checked = false;
                    label.classList.remove('selected');
                }
            });

            // Add event listeners to the *newly created* input elements
            answersContainer.querySelectorAll(`input[name^="question-${originalQuestionIndex}"]`).forEach(input => {
                input.addEventListener('change', (event) => {
                    const selectedValue = event.target.value;
                    const originalQuestionIndexForEvent = originalQuestions.findIndex(q => q === questions[actualQuestionIndexInShuffledArray]); // Ensure correct index
                    selectAnswer(selectedValue, originalQuestionIndexForEvent);
                });
            });

            updateNavigationButtons();
            updateMarkButton(); // Update the state of the mark button
            hideFeedback();
            // Hide inline explanation button by default, show only in practice mode after answering
            explanationInlineButton.classList.add('hidden');

             // In practice mode, if already answered, show immediate feedback and explanation button
            if (currentMode === 'practice') {
                const answeredCount = userAnswers[originalQuestionIndex].length;
                const question = originalQuestions[originalQuestionIndex]; // Get original question data

                // For single choice, feedback appears immediately if answered
                // For multi-choice, feedback appears when the number of selected answers matches the number of correct answers
                const shouldShowFeedback = (!question.multiChoice && answeredCount > 0) ||
                                           (question.multiChoice && answeredCount === question.correct.length);

                if (shouldShowFeedback) {
                    // Disable all answer inputs
                    answersContainer.querySelectorAll(`input[name^="question-${originalQuestionIndex}"]`).forEach(input => {
                        input.disabled = true;
                    });

                    // Show correct/incorrect styling and feedback
                    const isCorrectOverall = checkAnswerCorrectness(originalQuestionIndex);
                    if (isCorrectOverall) {
                        showFeedback('Richtig!', 'correct');
                    } else {
                        showFeedback('Falsch!', 'incorrect');
                    }
                    explanationInlineButton.classList.remove('hidden');

                    // Apply correct/incorrect styling to all buttons based on correct answers and user's selection
                    answersContainer.querySelectorAll(`input[name^="question-${originalQuestionIndex}"]`).forEach(input => {
                        const label = input.closest('label');
                        if (question.correct.includes(input.value)) {
                            label.classList.add('correct');
                        } else {
                            label.classList.remove('correct');
                        }

                        if (userAnswers[originalQuestionIndex].includes(input.value) && !question.correct.includes(input.value)) {
                            label.classList.add('incorrect');
                        } else {
                            label.classList.remove('incorrect');
                        }
                    });
                } else {
                    // Re-enable answer inputs if not yet ready to show feedback
                    answersContainer.querySelectorAll(`input[name^="question-${originalQuestionIndex}"]`).forEach(input => {
                        input.disabled = false;
                        input.closest('label').classList.remove('selected', 'correct', 'incorrect'); // Clear previous styling
                    });
                }
            }
        }

        /**
         * WÃ¤hlt eine Antwort aus oder hebt die Auswahl auf.
         * @param {string} selectedAnswerIndex - Der Index der ausgewÃ¤hlten Antwort (z.B. "A", "B").
         * @param {number} originalQuestionIndex - Der tatsÃ¤chliche Index der Frage im originalen Fragen-Array.
         */
        function selectAnswer(selectedAnswerIndex, originalQuestionIndex) {
            const question = originalQuestions[originalQuestionIndex]; // Use originalQuestions for core data
            let currentSelected = userAnswers[originalQuestionIndex];

            if (question.multiChoice) {
                // For multi-choice, limit the number of selections
                if (currentSelected.includes(selectedAnswerIndex)) {
                    // If already selected, unselect it
                    userAnswers[originalQuestionIndex] = currentSelected.filter(item => item !== selectedAnswerIndex);
                } else {
                    // If not selected, and we haven't reached the max allowed, select it
                    if (currentSelected.length < question.correct.length) { // Limit selection to the number of correct answers
                        userAnswers[originalQuestionIndex].push(selectedAnswerIndex);
                    } else {
                        // Optionally, alert the user they can't select more
                        // Using a more user-friendly message instead of alert()
                        showFeedback(`Sie kÃ¶nnen maximal ${question.correct.length} Antworten fÃ¼r diese Frage auswÃ¤hlen.`, 'incorrect');
                        // Prevent the checkbox from being checked if max reached
                        const inputElement = answersContainer.querySelector(`input[value="${selectedAnswerIndex}"][name^="question-${originalQuestionIndex}"]`);
                        if (inputElement) {
                            inputElement.checked = false;
                        }
                        return; // Exit without updating UI or checking feedback
                    }
                }
            } else { // Single choice (radio button behavior)
                userAnswers[originalQuestionIndex] = [selectedAnswerIndex];
            }

            // UI-Aktualisierung
            const answerInputs = answersContainer.querySelectorAll(`input[name^="question-${originalQuestionIndex}"]`);
            answerInputs.forEach(input => {
                const label = input.closest('label');
                if (userAnswers[originalQuestionIndex].includes(input.value)) {
                    input.checked = true;
                    label.classList.add('selected');
                } else {
                    input.checked = false; // Ensure unselected are unchecked for radios
                    label.classList.remove('selected');
                }
            });

            // Immediate feedback in practice mode
            if (currentMode === 'practice') {
                const answeredCount = userAnswers[originalQuestionIndex].length;
                const shouldShowFeedback = (!question.multiChoice && answeredCount > 0) ||
                                           (question.multiChoice && answeredCount === question.correct.length);

                if (shouldShowFeedback) {
                    const isCorrect = checkAnswerCorrectness(originalQuestionIndex);
                    if (isCorrect) {
                        showFeedback('Richtig!', 'correct');
                    } else {
                        showFeedback('Falsch!', 'incorrect');
                    }
                    explanationInlineButton.classList.remove('hidden');

                    // Apply correct/incorrect styling and disable inputs
                    answerInputs.forEach(input => {
                        const label = input.closest('label');
                        if (question.correct.includes(input.value)) {
                            label.classList.add('correct');
                        } else {
                            label.classList.remove('correct');
                        }

                        if (userAnswers[originalQuestionIndex].includes(input.value) && !question.correct.includes(input.value)) {
                            label.classList.add('incorrect');
                        } else {
                            label.classList.remove('incorrect');
                        }
                        input.disabled = true; // Disable after selection
                    });
                } else {
                    hideFeedback();
                    explanationInlineButton.classList.add('hidden');
                }
            }
        }

        /**
         * ÃberprÃ¼ft die Korrektheit der Antwort fÃ¼r die aktuelle Frage im Ãben-Modus.
         * @param {number} originalQuestionIndex - Der Index der Frage im originalen Fragen-Array.
         * @returns {boolean} True, wenn die Antwort (vollstÃ¤ndig) korrekt ist, sonst False.
         */
        function checkAnswerCorrectness(originalQuestionIndex) {
            const question = originalQuestions[originalQuestionIndex];
            const userAnswerForQuestion = userAnswers[originalQuestionIndex];

            // For single choice, it's a direct comparison
            if (!question.multiChoice) {
                return userAnswerForQuestion.length === 1 && userAnswerForQuestion[0] === question.correct[0];
            }

            // For multiple choice, both sets must be identical
            return question.correct.length === userAnswerForQuestion.length &&
                   question.correct.every(val => userAnswerForQuestion.includes(val)) &&
                   userAnswerForQuestion.every(val => question.correct.includes(val));
        }

        /**
         * Aktualisiert den Status der Navigationsbuttons (ZurÃ¼ck, Weiter, Quiz beenden).
         */
        function updateNavigationButtons() {
            if (isInReviewMode) {
                normalNavButtons.classList.add('hidden');
                reviewNavButtons.classList.remove('hidden');

                prevMarkedButton.disabled = currentReviewIndex === 0;
                nextMarkedButton.disabled = currentReviewIndex === markedQuestionIndices.length - 1;
            } else {
                normalNavButtons.classList.remove('hidden');
                reviewNavButtons.classList.add('hidden');

                prevButton.disabled = currentQuestionIndex === 0;
                nextButton.disabled = currentQuestionIndex === questions.length - 1;

                if (currentMode === 'test') {
                    submitButton.classList.remove('hidden'); // Always show submit in test mode
                    nextButton.classList.remove('hidden'); // Next button also always visible
                } else { // Practice mode
                    submitButton.classList.add('hidden'); // Hide submit in practice mode
                    if (currentQuestionIndex === questions.length - 1) {
                        nextButton.classList.add('hidden');
                    } else {
                        nextButton.classList.remove('hidden');
                    }
                }
            }
            updateMarkedCountDisplay();
        }

        /**
         * Aktualisiert den Text und Stil des "Mark for Review"-Buttons.
         */
        function updateMarkButton() {
            const actualQuestionInShuffled = questions[currentQuestionIndex];
            const originalIndex = originalQuestions.findIndex(q => q === actualQuestionInShuffled);

            if (markedForReview[originalIndex]) {
                markButton.textContent = 'Markierung aufheben';
                markButton.classList.add('marked');
            } else {
                markButton.textContent = 'Frage zum ÃberprÃ¼fen markieren';
                markButton.classList.remove('marked');
            }
        }

        /**
         * Aktualisiert die Anzeige der Anzahl der markierten Fragen.
         */
        function updateMarkedCountDisplay() {
            const count = markedForReview.filter(isMarked => isMarked).length;
            markedCountDisplay.textContent = count;
            // Deaktiviere den Review-Button, wenn keine Fragen markiert sind
            reviewMarkedButton.disabled = count === 0;
        }

        /**
         * Zeigt eine Feedback-Nachricht an.
         * @param {string} message - Die anzuzeigende Nachricht.
         * @param {string} type - Der Typ des Feedbacks ('correct' oder 'incorrect').
         */
        function showFeedback(message, type) {
            feedbackMessage.textContent = message;
            feedbackMessage.classList.remove('hidden', 'feedback-correct', 'feedback-incorrect');
            feedbackMessage.classList.add(`feedback-${type}`);
        }

        /**
         * Versteckt die Feedback-Nachricht.
         */
        function hideFeedback() {
            feedbackMessage.classList.add('hidden');
            feedbackMessage.classList.remove('feedback-correct', 'feedback-incorrect');
        }

        /**
         * Zeigt das Modal zum Beenden des Quiz an.
         */
        function showFinishQuizModal() {
            finishQuizModal.classList.add('show');
        }

        /**
         * Versteckt das Modal zum Beenden des Quiz.
         */
        function hideFinishQuizModal() {
            finishQuizModal.classList.remove('show');
        }

        /**
         * Zeigt das Modal an, wenn die Zeit abgelaufen ist.
         */
        function showTimeUpModal() {
            timeUpModal.classList.add('show');
            // Deaktiviere alle Quiz-Buttons, wenn die Zeit abgelaufen ist
            prevButton.disabled = true;
            nextButton.disabled = true;
            submitButton.disabled = true;
            markButton.disabled = true;
            reviewMarkedButton.disabled = true; // Deaktiviere auch den Review-Button
            prevMarkedButton.disabled = true;
            nextMarkedButton.disabled = true;
            exitReviewButton.disabled = true;
            answersContainer.querySelectorAll('input').forEach(input => input.disabled = true);
        }

        /**
         * Zeigt das ErklÃ¤rungsmodal an.
         */
        function showExplanationModal() {
            explanationModal.classList.add('show');
            // Der Lade-Spinner ist hier nicht mehr nÃ¶tig, da die ErklÃ¤rung sofort verfÃ¼gbar ist.
            explanationContent.innerHTML = ''; // Inhalt leeren, bevor die neue ErklÃ¤rung geladen wird
        }

        /**
         * Versteckt das ErklÃ¤rungsmodal.
         */
        function hideExplanationModal() {
            explanationModal.classList.remove('show');
            explanationContent.innerHTML = ''; // Clear content
        }

        /**
         * Zeigt das Modal mit der Liste der markierten Fragen an.
         */
        function showReviewListModal() {
            markedQuestionsList.innerHTML = ''; // Clear previous list
            markedQuestionIndices = []; // Reset the list for current review session

            // Iterate through originalQuestions to get their original index
            originalQuestions.forEach((q, originalIndex) => {
                if (markedForReview[originalIndex]) {
                    markedQuestionIndices.push(originalIndex);
                    const listItem = document.createElement('li');
                    listItem.textContent = `Frage ${originalIndex + 1}: ${q.question.substring(0, 70)}...`; // Truncate question text
                    listItem.dataset.questionOriginalIndex = originalIndex; // Store original index
                    listItem.addEventListener('click', (event) => {
                        const clickedOriginalIndex = parseInt(event.target.closest('li').dataset.questionOriginalIndex);
                        currentReviewIndex = markedQuestionIndices.indexOf(clickedOriginalIndex);
                        hideReviewListModal();
                        enterReviewMode();
                    });
                    markedQuestionsList.appendChild(listItem);
                }
            });

            if (markedQuestionIndices.length === 0) {
                noMarkedQuestionsMessage.classList.remove('hidden');
                markedQuestionsList.classList.add('hidden');
                startReviewModeButton.disabled = true; // Cannot start review mode if no questions are marked
            } else {
                noMarkedQuestionsMessage.classList.add('hidden');
                markedQuestionsList.classList.remove('hidden');
                startReviewModeButton.disabled = false;
            }

            reviewListModal.classList.add('show');
        }

        /**
         * Versteckt das Modal mit der Liste der markierten Fragen.
         */
        function hideReviewListModal() {
            reviewListModal.classList.remove('show');
        }

        /**
         * Wechselt in den Review-Modus.
         */
        function enterReviewMode() {
            if (markedQuestionIndices.length === 0) {
                showFeedback("Keine Fragen zum ÃberprÃ¼fen markiert.", "incorrect");
                return;
            }
            isInReviewMode = true;
            currentReviewIndex = 0; // Start from the first marked question
            hideReviewListModal();
            displayQuestion();
        }

        /**
         * VerlÃ¤sst den Review-Modus und kehrt zum normalen Quiz zurÃ¼ck.
         */
        function exitReviewMode() {
            isInReviewMode = false;
            displayQuestion(); // Display the question we were on before entering review mode
        }

        /**
         * Zeigt die ErklÃ¤rung fÃ¼r eine Frage an.
         * @param {object} questionData - Die Daten der Frage.
         */
        function displayLocalExplanation(questionData) {
            showExplanationModal();
            if (questionData.explanation) {
                explanationContent.innerHTML = `<p>${questionData.explanation.replace(/\n/g, '<br>')}</p>`;
            } else {
                explanationContent.innerHTML = '<p class="text-gray-600">FÃ¼r diese Frage ist keine ErklÃ¤rung verfÃ¼gbar.</p>';
            }
        }

        /**
         * Berechnet die Punkte fÃ¼r eine einzelne Frage gemÃ¤Ã den Regeln.
         * @param {object} question - Das Fragenobjekt.
         * @param {Array<string>} userAnswer - Die vom Benutzer ausgewÃ¤hlten Antworten (z.B. ["A", "C"]).
         * @returns {number} Die erzielten Punkte fÃ¼r diese Frage.
         */
        function calculateQuestionScore(question, userAnswer) {
            let score = 0;
            const numCorrectOptions = question.correct.length;
            const userSelectedCount = userAnswer.length;

            // Regel: Falls mehr Antworten als die angegebene Anzahl richtiger Antworten angekreuzt wurden, erhalten Sie in jedem Fall 0 Punkte.
            if (userSelectedCount > numCorrectOptions) {
                return 0;
            }

            if (numCorrectOptions === 1) {
                if (userSelectedCount === 1 && userAnswer[0] === question.correct[0]) {
                    score = 1;
                } else {
                    score = 0;
                }
            } else if (numCorrectOptions === 2) {
                const pointsPerOption = 0.5;
                let tempScore = 0;
                userAnswer.forEach(ans => {
                    if (question.correct.includes(ans)) {
                        tempScore += pointsPerOption;
                    } else {
                        // Abzug nur, wenn die falsche Antwort ausgewÃ¤hlt wurde und nicht nur eine nicht ausgewÃ¤hlte richtige Antwort
                        tempScore -= pointsPerOption;
                    }
                });
                score = Math.max(0, tempScore); // Gesamtpunktzahl fÃ¼r eine Frage kann niemals negativ sein.
            } else if (numCorrectOptions === 3) {
                const pointsPerOption = 1/3;
                let tempScore = 0;
                userAnswer.forEach(ans => {
                    if (question.correct.includes(ans)) {
                        tempScore += pointsPerOption;
                    } else {
                        // Abzug nur, wenn die falsche Antwort ausgewÃ¤hlt wurde und nicht nur eine nicht ausgewÃ¤hlte richtige Antwort
                        tempScore -= pointsPerOption;
                    }
                });
                score = Math.max(0, tempScore); // Gesamtpunktzahl fÃ¼r eine Frage kann niemals negativ sein.
            }
            return score;
        }

        /**
         * Ãbermittelt das Quiz und zeigt die Ergebnisse an.
         */
        function submitQuiz() {
            clearInterval(timerInterval); // Stoppe den Timer

            let totalScore = 0;
            let resultsHTML = '';
            let reviewAfterSubmitList = []; // For the list of marked questions after submission

            originalQuestions.forEach((question, index) => { // Iterate over originalQuestions for results
                const userAnswerForQuestion = userAnswers[index];
                const questionScore = calculateQuestionScore(question, userAnswerForQuestion);
                totalScore += questionScore;

                // Check if user answer is strictly correct (all correct options, no extra wrong ones)
                const isCompletelyCorrect = checkAnswerCorrectness(index);

                if (markedForReview[index]) {
                    reviewAfterSubmitList.push(index);
                }

                // Display each question's result
                resultsHTML += `<div class="p-4 my-4 rounded-lg shadow-md ${isCompletelyCorrect ? 'bg-green-100' : 'bg-red-100'}">`;
                resultsHTML += `<p class="font-bold text-lg mb-2">Frage ${index + 1}: ${question.question}</p>`;
                resultsHTML += `<p class="mb-1">Ihre Antwort(en): <span class="${isCompletelyCorrect ? 'text-green-700' : 'text-red-700'}">${userAnswerForQuestion.length > 0 ? userAnswerForQuestion.map(idx => question.answers[idx.charCodeAt(0) - 65]).join('; ') : 'Keine Antwort'}</span></p>`;
                resultsHTML += `<p>Richtige Antwort(en): <span class="text-green-700">${question.correctTexts.join('; ')}</span></p>`;
                resultsHTML += `<button class="show-explanation-btn mt-2" data-question-index="${index}">â¨ ErklÃ¤rung anzeigen</button>`;
                resultsHTML += `</div>`;
            });

            const percentage = (totalScore / originalQuestions.length) * 100; // Each question is 1 point max
            const passed = totalScore >= 28; // 28 von 40 Punkten (70%) zum Bestehen

            let finalSummaryHTML = `
                <h2>Ihre Quizergebnisse</h2>
                <p class="text-2xl font-bold mt-5">Gesamtpunktzahl: ${totalScore.toFixed(2)} von ${originalQuestions.length}</p>
                <p class="text-2xl font-bold mt-3">Prozentsatz: ${percentage.toFixed(2)}%</p>
                <p class="text-2xl font-bold mt-3 ${passed ? 'text-green-700' : 'text-red-700'}">
                    Sie haben ${passed ? 'BESTANDEN' : 'NICHT BESTANDEN'}.
                </p>
                <p class="text-xl mt-3">Verbleibende Zeit: ${formatTime(timeLeft > 0 ? timeLeft : 0)}</p>
                <hr class="my-6">
            `;

            if (reviewAfterSubmitList.length > 0) {
                finalSummaryHTML += `
                    <div class="results-marked-list">
                        <h3>Markierte Fragen (zum ÃberprÃ¼fen nach Abgabe):</h3>
                        <ul>
                            ${reviewAfterSubmitList.map(idx => `
                                <li>
                                    Frage ${idx + 1}: ${originalQuestions[idx].question.substring(0, 70)}...
                                    <button class="show-explanation-btn" data-question-index="${idx}">ErklÃ¤rung anzeigen</button>
                                </li>
                            `).join('')}
                        </ul>
                    </div>
                `;
            }

            const quizContainer = document.querySelector('.quiz-container');
            quizContainer.style.display = 'block';
            quizContainer.style.padding = '20px'; /* Adjust padding for results view */
            quizContainer.style.minHeight = 'auto';
            quizContainer.innerHTML = finalSummaryHTML + resultsHTML;
            quizContainer.classList.add('results-container');
            
            // Add event listeners for explanation buttons after results are rendered
            document.querySelectorAll('.show-explanation-btn').forEach(button => {
                button.addEventListener('click', (event) => {
                    const questionIndex = parseInt(event.target.dataset.questionIndex);
                    const questionData = originalQuestions[questionIndex];
                    displayLocalExplanation(questionData); // Use the local explanation function
                });
            });
        }

        // --- Mode Selection and Quiz Initialization ---
        function initQuiz() {
            modeSelectionScreen.style.display = 'flex';
            quizActiveContent.style.display = 'none';
            // Stop any running timer and reset time
            clearInterval(timerInterval);
            timeLeft = TIME_LIMIT_MINUTES * 60;
            timerDisplay.textContent = formatTime(timeLeft);
        }

        function setupQuizMode(mode) {
            currentMode = mode;
            modeSelectionScreen.style.display = 'none';
            quizActiveContent.style.display = 'block';
            quizModeTitle.textContent = (mode === 'practice' ? 'Ãben Modus' : 'Test Modus');

            // Shuffle questions when a mode is selected
            questions = [...originalQuestions]; // Create a shallow copy
            shuffleArray(questions);

            // Reset user answers and marked questions to align with new shuffled order
            resetQuizStateVariablesForNewMode();

            if (currentMode === 'test') {
                explanationInlineButton.classList.add('hidden'); // Hide inline explanation button in test mode
                submitButton.classList.remove('hidden'); // Show submit button in test mode
            } else { // Practice mode
                 explanationInlineButton.classList.remove('hidden'); // Ensure it's block in practice mode
                 explanationInlineButton.classList.add('hidden'); // Hidden until answer is selected
                 submitButton.classList.add('hidden'); // Hide submit button in practice mode
            }

            startTimer();
            displayQuestion();
            updateMarkedCountDisplay();
        }

        /**
         * Resets quiz-related state variables when a new mode is selected.
         */
        function resetQuizStateVariablesForNewMode() {
            currentQuestionIndex = 0;
            // userAnswers and markedForReview should be indexed by original question index
            userAnswers = new Array(originalQuestions.length).fill(null).map(() => []);
            markedForReview = new Array(originalQuestions.length).fill(false);
            markedQuestionIndices = []; // This will be rebuilt for review mode as needed
            currentReviewIndex = 0;
            isInReviewMode = false;
        }


        /**
         * Resets all quiz-related state variables to their initial values for a full reset.
         */
        function resetQuizState() {
            currentQuestionIndex = 0;
            questions = []; // Clear shuffled questions
            userAnswers = new Array(originalQuestions.length).fill(null).map(() => []);
            markedForReview = new Array(originalQuestions.length).fill(false);
            markedQuestionIndices = [];
            currentReviewIndex = 0;
            isInReviewMode = false;
            currentMode = null;
            clearInterval(timerInterval); // Stop the timer
            timeLeft = TIME_LIMIT_MINUTES * 60; // Reset time
            timerDisplay.textContent = formatTime(timeLeft); // Update timer display
            hideFeedback();
            explanationInlineButton.classList.add('hidden'); // Ensure hidden
            submitButton.classList.add('hidden'); // Hide submit button for general reset
            nextButton.classList.remove('hidden'); // Ensure next is visible by default
            prevButton.classList.remove('hidden'); // Ensure prev is visible by default
            // Revert quiz-container styles back to its default state for mode selection screen
            const quizContainer = document.querySelector('.quiz-container');
            quizContainer.classList.remove('results-container');
            quizContainer.style.display = 'flex'; /* Reapply flex for centering */
            quizContainer.style.padding = '30px'; /* Revert padding */
        }


        // Event Listeners for Mode Selection
        startPracticeModeButton.addEventListener('click', () => setupQuizMode('practice'));
        startTestModeButton.addEventListener('click', () => setupQuizMode('test'));

        // Event Listener for inline explanation button (visible in practice mode after answer)
        explanationInlineButton.addEventListener('click', () => {
            const actualQuestionInShuffled = questions[currentQuestionIndex];
            const originalIndex = originalQuestions.findIndex(q => q === actualQuestionInShuffled);
            const questionData = originalQuestions[originalIndex];
            displayLocalExplanation(questionData); // Use the local explanation function
        });

        // Event listener for the new "Switch Mode" button
        switchModeButton.addEventListener('click', () => {
            resetQuizState();
            initQuiz(); // Go back to mode selection
        });

        // Event-Listener for navigation and modals
        prevButton.addEventListener('click', () => {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                displayQuestion();
            }
        });

        nextButton.addEventListener('click', () => {
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            }
        });

        markButton.addEventListener('click', () => {
            const actualQuestionInShuffled = questions[currentQuestionIndex];
            const originalIndex = originalQuestions.findIndex(q => q === actualQuestionInShuffled);
            markedForReview[originalIndex] = !markedForReview[originalIndex];
            updateMarkButton();
            updateMarkedCountDisplay();
        });

        reviewMarkedButton.addEventListener('click', showReviewListModal);
        closeReviewListButton.addEventListener('click', hideReviewListModal);
        startReviewModeButton.addEventListener('click', enterReviewMode);

        prevMarkedButton.addEventListener('click', () => {
            if (currentReviewIndex > 0) {
                currentReviewIndex--;
                displayQuestion();
            }
        });

        nextMarkedButton.addEventListener('click', () => {
            if (currentReviewIndex < markedQuestionIndices.length - 1) {
                currentReviewIndex++;
                displayQuestion();
            }
        });

        exitReviewButton.addEventListener('click', exitReviewMode);

        submitButton.addEventListener('click', showFinishQuizModal);
        confirmFinishButton.addEventListener('click', () => {
            hideFinishQuizModal();
            submitQuiz();
        });
        cancelFinishButton.addEventListener('click', hideFinishQuizModal);
        viewResultsButton.addEventListener('click', () => {
            timeUpModal.classList.remove('show');
            submitQuiz();
        });
        closeExplanationButton.addEventListener('click', hideExplanationModal);


        // Initialisierung des Quiz beim Laden der Seite
        window.onload = () => {
            initQuiz(); // Start with mode selection screen
        };
    </script>
</body>
</html>
